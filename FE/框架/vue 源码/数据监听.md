## 数据监听

vue是什么？用官网的话描述：

> Vue (读音 /vjuː/，类似于 **view**) 是一套用于构建用户界面的**渐进式框架**。与其它大型框架不同的是，Vue 被设计为可以自底向上逐层应用。Vue 的核心库只关注视图层，不仅易于上手，还便于与第三方库或既有项目整合。另一方面，当与[现代化的工具链](https://v2.cn.vuejs.org/v2/guide/single-file-components.html)以及各种[支持类库](https://github.com/vuejs/awesome-vue#libraries--plugins)结合使用时，Vue 也完全能够为复杂的单页应用提供驱动。

官网描述中的`Vue 的核心库只关注视图层`，也是vue的核心。

vue推荐使用`数据驱动`的方式改变视图，那么就需要监听到数据是何时变化的。

### 使数据便的可观测

vue2中使用的是`Object.defineProperty`,通过劫持data中的数据，添加`get`和`set`访问器属性；添加访问器的属性被读或写的时候触发`get`和`set`方法；这样data中的数据被修改时就会触发set方法，被读取时触发get方法。

### 依赖收集

添加了访问器的数据已经可以知道数据什么时候发生改变了，这个时候需通知视图发生改变；视图很大时，一下子全部更新视图肯定不合适，所以最合理的方式是哪一块对应的视图发生变化了就通知谁。

> 数据读取是会触发get方法，修改时会触发set方法；
>
> 所以get方法可以收集到谁（依赖）使用了该数据；set方法可以通知依赖进行更新。

​	`dep`

在vue中实现了dep类，对依赖进行管理。